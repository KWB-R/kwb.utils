<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>What is this package for? • kwb.utils</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="What is this package for?">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kwb.utils</a>
        <span class="label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development package">0.4.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tutorial.html">What is this package for?</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kwb-r/kwb.utils">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>What is this package for?</h1>
                        <h4 class="author">Hauke Sonnenberg</h4>
            
            <h4 class="date">2018-12-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/kwb-r/kwb.utils/blob/master/vignettes/tutorial.Rmd"><code>vignettes/tutorial.Rmd</code></a></small>
      <div class="hidden name"><code>tutorial.Rmd</code></div>

    </div>

    
    
<p>Today is a good day to start documenting what this package (kwb.utils) is good for. I would like to start with a complete list of the names of the functions that are contained in this package. But how can I get such a list?</p>
<div id="how-to-get-an-overview-of-functions-in-a-package" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-get-an-overview-of-functions-in-a-package" class="anchor"></a>How to get an overview of functions in a package?</h2>
<p>In fact, I do not know (any more) how to achieve this. However, I know that this package contains a function <code><a href="../reference/assignPackageObjects.html">assignPackageObjects()</a></code> that copies all the objects that are contained in a package (including all its functions) to the global environment. By inspecting the definition, i.e. the body, of this function, we can learn how this function works. Therefore, just type the function’s name, without parentheses, and press Enter:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">kwb.utils<span class="op">::</span>assignPackageObjects
<span class="co">#&gt; function(package)</span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;   for (name in ls(getNamespace(package))) {</span>
<span class="co">#&gt;     object &lt;- get(name, envir = asNamespace(package), inherits = FALSE)</span>
<span class="co">#&gt;     assignGlobally(name, object)  </span>
<span class="co">#&gt;   }</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;environment: namespace:kwb.utils&gt;</span></code></pre></div>
<p>As the code reveals, the function loops through the values that are returned by <code>ls(getNamespace(package))</code> where <code>package</code> is the name of the package. This is exacly what we need. We can use this code to get the names of all objects in the “kwb.utils” package. Let’s store these names in the variable <code>object_names</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">object_names &lt;-<span class="st"> </span><span class="kw">ls</span>(<span class="kw">getNamespace</span>(<span class="st">"kwb.utils"</span>))

<span class="kw">length</span>(object_names)
<span class="co">#&gt; [1] 227</span></code></pre></div>
<p>Wow! There are 227 objects (functions) defined in this package. So where should I start?</p>
<p>Let’s have a look at the first six functions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(object_names)
<span class="co">#&gt; [1] "addClass"           "addRowWithName"     "addSuffixToColumns"</span>
<span class="co">#&gt; [4] "allAreEqual"        "allAreIdentical"    "almostEqual"</span></code></pre></div>
</div>
<div id="one-function-a-day" class="section level2">
<h2 class="hasAnchor">
<a href="#one-function-a-day" class="anchor"></a>One Function a day…</h2>
<p>There are 3 functions that are prefixed with <code>add</code>. These functions are explained in the following.</p>
<div id="function-addclass" class="section level3">
<h3 class="hasAnchor">
<a href="#function-addclass" class="anchor"></a>Function <code><a href="../reference/addClass.html">addClass()</a></code>
</h3>
<p>The function <code>addClass</code> adds an element to the <code>class</code> attribute of an object. You may never have heard about the <code>class</code> attribute. That’s ok. It allows you to assign a user-defined class to an object. By doing so, you can do some nice stuff, for example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define your own print function for objects of class "birthday"</span>
print.birthday &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  <span class="kw">print</span>(<span class="kw">sprintf</span>(<span class="st">"It's your birthday: %s!"</span>, x))
}

<span class="co"># Define a birthday string and print it</span>
x &lt;-<span class="st"> "January 14"</span>
<span class="kw">print</span>(x)
<span class="co">#&gt; [1] "January 14"</span>

<span class="co"># Now, set the class attribute to "birthday" and print again!</span>
x &lt;-<span class="st"> </span>kwb.utils<span class="op">::</span><span class="kw">addClass</span>(x, <span class="st">"birthday"</span>)
<span class="kw">print</span>(x)
<span class="co">#&gt; [1] "It's your birthday: January 14!"</span></code></pre></div>
</div>
<div id="function-addrowwithname" class="section level3">
<h3 class="hasAnchor">
<a href="#function-addrowwithname" class="anchor"></a>Function <code><a href="../reference/addRowWithName.html">addRowWithName()</a></code>
</h3>
<p>This function does no more than adding a row to a data frame with <code>rbind</code> and giving it a name:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">value =</span> <span class="dv">10</span><span class="op">:</span><span class="dv">11</span>)

new_row &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">value =</span> <span class="kw">sum</span>(x<span class="op">$</span>value))

kwb.utils<span class="op">::</span><span class="kw">addRowWithName</span>(x, new_row, <span class="dt">row.name =</span> <span class="st">"total"</span>)
<span class="co">#&gt;       value</span>
<span class="co">#&gt; 1        10</span>
<span class="co">#&gt; 2        11</span>
<span class="co">#&gt; total    21</span></code></pre></div>
</div>
<div id="function-addsuffixtocolumns" class="section level3">
<h3 class="hasAnchor">
<a href="#function-addsuffixtocolumns" class="anchor"></a>Function <code><a href="../reference/addSuffixToColumns.html">addSuffixToColumns()</a></code>
</h3>
<p>This function adds a postfix to the column names of a data frame. This may be useful when column-binding data frames. The function can be used to indicate the origin of each column by giving it a suffix related to the data frame that it originates from.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define a first data frame</span>
data_frame_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, 
  <span class="dt">first =</span> <span class="kw">c</span>(<span class="st">"Peter"</span>, <span class="st">"Mary"</span>), 
  <span class="dt">last =</span> <span class="kw">c</span>(<span class="st">"Miller"</span>, <span class="st">"Smith"</span>)
)

<span class="co"># Define a second data frame</span>
data_frame_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">height_cm =</span> <span class="kw">c</span>(<span class="dv">181</span>, <span class="dv">171</span>),
  <span class="dt">weigth_kg =</span> <span class="kw">c</span>(<span class="dv">68</span>, <span class="dv">59</span>)
)

<span class="co"># Column-bind the data frames, after giving their columns a unique suffix</span>
<span class="kw">cbind</span>(
  kwb.utils<span class="op">::</span><span class="kw">addSuffixToColumns</span>(data_frame_<span class="dv">1</span>, <span class="st">"_1"</span>),
  kwb.utils<span class="op">::</span><span class="kw">addSuffixToColumns</span>(data_frame_<span class="dv">2</span>, <span class="st">"_2"</span>)
)
<span class="co">#&gt;   id_1 first_1 last_1 height_cm_2 weigth_kg_2</span>
<span class="co">#&gt; 1    1   Peter Miller         181          68</span>
<span class="co">#&gt; 2    2    Mary  Smith         171          59</span></code></pre></div>
<p>Cool, I explained three functions. There are only 224 left! The next three functions, <code><a href="../reference/allAreEqual.html">allAreEqual()</a></code>, <code><a href="../reference/allAreIdentical.html">allAreIdentical()</a></code>, and <code><a href="../reference/almostEqual.html">almostEqual()</a></code> belong to a group of functions that return a vector of <code>logical</code>. They are explained next.</p>
</div>
<div id="function-allareequal" class="section level3">
<h3 class="hasAnchor">
<a href="#function-allareequal" class="anchor"></a>Function <code><a href="../reference/allAreEqual.html">allAreEqual()</a></code>
</h3>
<p>This function checks if all values in a vector are equal to each other:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">kwb.utils<span class="op">::</span><span class="kw">allAreEqual</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>))
<span class="co">#&gt; [1] TRUE</span>
kwb.utils<span class="op">::</span><span class="kw">allAreEqual</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>))
<span class="co">#&gt; [1] FALSE</span></code></pre></div>
</div>
<div id="function-allareidentical" class="section level3">
<h3 class="hasAnchor">
<a href="#function-allareidentical" class="anchor"></a>Function <code><a href="../reference/allAreIdentical.html">allAreIdentical()</a></code>
</h3>
<p>This function checks if all elements in a list are identical to each other. It may be useful when checking whether different versions of a function (that may, e.g., be created during code cleaning) return exactly the same, when being given the same inputs.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define different functions that are intended to do the same</span>
get_list_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) <span class="kw">list</span>(<span class="dt">a =</span> a, <span class="dt">b =</span> b)
get_list_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/setNames">setNames</a></span>(<span class="kw">list</span>(a, b), <span class="kw">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>))
get_list_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) <span class="kw">c</span>(<span class="kw">list</span>(<span class="dt">a =</span> a), <span class="dt">b =</span> b)
get_list_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) <span class="kw">c</span>(<span class="kw">list</span>(<span class="dt">a =</span> a), <span class="kw">list</span>(<span class="dt">b =</span> b))

<span class="co"># Call the functions with identical arguments and put the results into a list</span>
results &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="kw">get_list_1</span>(<span class="dv">1</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>), 
  <span class="kw">get_list_2</span>(<span class="dv">1</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>), 
  <span class="kw">get_list_3</span>(<span class="dv">1</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>),
  <span class="kw">get_list_4</span>(<span class="dv">1</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>)
)

<span class="co"># Not all results are the same...</span>
kwb.utils<span class="op">::</span><span class="kw">allAreIdentical</span>(results)
<span class="co">#&gt; [1] FALSE</span>

<span class="co"># ... but all except the third:</span>
kwb.utils<span class="op">::</span><span class="kw">allAreIdentical</span>(results[<span class="op">-</span><span class="dv">3</span>])
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
</div>
<div id="function-almostequal" class="section level3">
<h3 class="hasAnchor">
<a href="#function-almostequal" class="anchor"></a>Function <code><a href="../reference/almostEqual.html">almostEqual()</a></code>
</h3>
<p>Take care when comparing floating point numbers! Whether floating point numbers are assumed to be equal or not, depends on how they were calculated. This is shown in the following example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">one_third_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">/</span><span class="dv">3</span>
one_third_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="dv">2</span><span class="op">/</span><span class="dv">3</span>

<span class="co"># Even though mathematically correct, they are not equal in R:</span>
one_third_<span class="dv">1</span> <span class="op">==</span><span class="st"> </span>one_third_<span class="dv">2</span>
<span class="co">#&gt; [1] FALSE</span></code></pre></div>
<p>With <code><a href="../reference/almostEqual.html">almostEqual()</a></code> numbers are compared by tolerating a small difference between the numbers. This difference can be set with the argument <code>tolerance</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The numbers are almost equal (with the default tolerance of 1e-12):</span>
kwb.utils<span class="op">::</span><span class="kw">almostEqual</span>(one_third_<span class="dv">1</span>, one_third_<span class="dv">2</span>)
<span class="co">#&gt; [1] TRUE</span>

<span class="co"># It depends on the tolerance if they are treated as equal:</span>
kwb.utils<span class="op">::</span><span class="kw">almostEqual</span>(one_third_<span class="dv">1</span>, one_third_<span class="dv">2</span>, <span class="dt">tolerance =</span> <span class="fl">1e-17</span>)
<span class="co">#&gt; [1] FALSE</span></code></pre></div>
</div>
<div id="function-appendsuffix" class="section level3">
<h3 class="hasAnchor">
<a href="#function-appendsuffix" class="anchor"></a>Function <code><a href="../reference/appendSuffix.html">appendSuffix()</a></code>
</h3>
<p>This function adds a suffix to all elements of a vector of character. It is mainly a shortcut to <code>paste0(values, suffix)</code> but allows to define values to be omitted:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define a vector of character</span>
values &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"id"</span>, letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])

<span class="co"># Add a suffix to all elements except "id"</span>
kwb.utils<span class="op">::</span><span class="kw">appendSuffix</span>(values, <span class="st">"_value"</span>, <span class="dt">valuesToOmit =</span> <span class="st">"id"</span>)
<span class="co">#&gt; [1] "id"      "a_value" "b_value" "c_value" "d_value" "e_value"</span></code></pre></div>
</div>
<div id="function-arglist" class="section level3">
<h3 class="hasAnchor">
<a href="#function-arglist" class="anchor"></a>Function <code><a href="../reference/arglist.html">arglist()</a></code>
</h3>
<p>The main purpose of the package “kwb.utils” is to provide functions that allow for writing cleaner and safer code. One main characteristic of clean code is that it is free or at least almost free of duplication. This is a very hard goal to achieve! But we should try our best!</p>
<p>Have you ever seen something like the following?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span>pi, pi, pi<span class="op">/</span><span class="dv">10</span>)
<span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>))
<span class="kw">plot</span>(x, <span class="kw">sin</span>(x), <span class="dt">xlab =</span> <span class="st">"x"</span>, <span class="dt">ylab =</span> <span class="st">"sin(x)"</span>, <span class="dt">pch =</span> <span class="dv">16</span>, <span class="dt">type =</span> <span class="st">"b"</span>, <span class="dt">cex =</span> <span class="fl">0.5</span>)
<span class="kw">plot</span>(x, <span class="kw">cos</span>(x), <span class="dt">xlab =</span> <span class="st">"x"</span>, <span class="dt">ylab =</span> <span class="st">"cos(x)"</span>, <span class="dt">pch =</span> <span class="dv">16</span>, <span class="dt">type =</span> <span class="st">"b"</span>, <span class="dt">cex =</span> <span class="fl">0.5</span>)</code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
<p>Do you spot the repetition? What if you want to change the plot character <code>pch</code> or the <code>type</code> of the plot or the character extension factor <code>cex</code> in both plots at the same time?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define common arguments</span>
common &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">x =</span> x, <span class="dt">pch =</span> <span class="dv">16</span>, <span class="dt">xlab =</span> <span class="st">"x"</span>, <span class="dt">type =</span> <span class="st">"b"</span>, <span class="dt">cex =</span> <span class="fl">0.5</span>)

<span class="co"># Call the plot function with the common arguments, extended by</span>
<span class="co"># call-specific arguments</span>
<span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>))
<span class="kw">do.call</span>(plot, kwb.utils<span class="op">::</span><span class="kw">arglist</span>(common, <span class="dt">y =</span> <span class="kw">sin</span>(x), <span class="dt">ylab =</span> <span class="st">"sin(x)"</span>))
<span class="kw">do.call</span>(plot, kwb.utils<span class="op">::</span><span class="kw">arglist</span>(common, <span class="dt">y =</span> <span class="kw">cos</span>(x), <span class="dt">ylab =</span> <span class="st">"cos(x)"</span>))</code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-13-1.png" width="576"></p>
<p>The function <code><a href="../reference/arglist.html">arglist()</a></code> merges the contents of one or more lists by allowing to overwrite existing list elements. In the above example, the list of <code>common</code> arguments is just extended. Elements in this list could also be overwritten, such as the argument <code>cex</code> in the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">do.call</span>(
  <span class="dt">what =</span> plot, 
  <span class="dt">args =</span> kwb.utils<span class="op">::</span><span class="kw">arglist</span>(common, <span class="dt">y =</span> <span class="kw">sin</span>(x), <span class="dt">ylab =</span> <span class="st">"sin(x)"</span>, <span class="dt">cex =</span> <span class="dv">1</span>)
)</code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-14-1.png" width="576"></p>
<p>This pattern of calling a function with an extended argument list is so common that I wrote a function <code><a href="../reference/callWith.html">callWith()</a></code> that allows to write the above shorter:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">kwb.utils<span class="op">::</span><span class="kw">callWith</span>(plot, common, <span class="dt">y =</span> <span class="kw">sin</span>(x), <span class="dt">ylab =</span> <span class="st">"sin(x)"</span>, <span class="dt">cex =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-15-1.png" width="576"></p>
<p>But this will be explained later…</p>
</div>
<div id="function-ascolumnlist" class="section level3">
<h3 class="hasAnchor">
<a href="#function-ascolumnlist" class="anchor"></a>Function <code><a href="../reference/asColumnList.html">asColumnList()</a></code>
</h3>
<p>This function converts a matrix into a list of its columns. This is useful when you want to loop through the columns of a matrix <code>m</code> with <code>lapply()</code>. You could also loop through the columns with <code>apply(m, MARGINS = 2)</code>. However, the usage of <code>lapply()</code> should be preferred to the usage of <code>apply()</code>, as demonstrated in the following example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define and show a very simple matrix</span>
(m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow =</span> <span class="dv">2</span>))
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]    1    3    5</span>
<span class="co">#&gt; [2,]    2    4    6</span>

<span class="co"># Define functions that return/count the values above a threshold.</span>
<span class="co"># These functions are to be applied to each column of the matrix </span>
get_above &lt;-<span class="st"> </span><span class="cf">function</span>(x, threshold) x[x <span class="op">&gt;</span><span class="st"> </span>threshold]
count_above &lt;-<span class="st"> </span><span class="cf">function</span>(x, threshold) <span class="kw">sum</span>(x <span class="op">&gt;</span><span class="st"> </span>threshold)</code></pre></div>
<p>With the first function, the two approaches return identical results:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Approach 1: loop through columns using asColumnList() and lapply()</span>
result_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">lapply</span>(kwb.utils<span class="op">::</span><span class="kw">asColumnList</span>(m), get_above, <span class="dv">3</span>)
<span class="kw">str</span>(result_<span class="dv">1</span>)
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ : int(0) </span>
<span class="co">#&gt;  $ : int 4</span>
<span class="co">#&gt;  $ : int [1:2] 5 6</span>

<span class="co"># Approach 2: loop through columns using apply()</span>
result_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">apply</span>(m, <span class="dv">2</span>, get_above, <span class="dv">3</span>)
<span class="kw">str</span>(result_<span class="dv">2</span>)
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ : int(0) </span>
<span class="co">#&gt;  $ : int 4</span>
<span class="co">#&gt;  $ : int [1:2] 5 6</span></code></pre></div>
<p>However, with the second function, the two approaches return differing results:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Approach 1: loop through columns using asColumnList() and lapply()</span>
result_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">lapply</span>(kwb.utils<span class="op">::</span><span class="kw">asColumnList</span>(m), count_above, <span class="dv">3</span>)
<span class="kw">str</span>(result_<span class="dv">1</span>)
<span class="co">#&gt; List of 3</span>
<span class="co">#&gt;  $ : int 0</span>
<span class="co">#&gt;  $ : int 1</span>
<span class="co">#&gt;  $ : int 2</span>

<span class="co"># Approach 2: loop through columns using apply()</span>
result_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">apply</span>(m, <span class="dv">2</span>, count_above, <span class="dv">3</span>)
<span class="kw">str</span>(result_<span class="dv">2</span>)
<span class="co">#&gt;  int [1:3] 0 1 2</span></code></pre></div>
<p>The first approach using <code>lapply()</code> returns a <code>list</code>, whereas the second approach using <code>apply()</code> returns a vector. The first approach should be preferred because the user can trust that the result will always be a list, independent of the function that is called within the loop. The preferred function <code>lapply()</code> requires an object that it can loop through and this is what <code><a href="../reference/asColumnList.html">asColumnList()</a></code> provides!</p>
</div>
<div id="function-asnofactordataframe" class="section level3">
<h3 class="hasAnchor">
<a href="#function-asnofactordataframe" class="anchor"></a>Function <code>asNoFactorDataFrame</code>
</h3>
<p>This function is a shortcut to <code>as.data.frame(..., stringsAsFactors = FALSE)</code>. Using this function may slightly improve the readability of a script (as the number of arguments passed to the function is reduced):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">matrix</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>], <span class="dt">nrow =</span> <span class="dv">2</span>)

result_<span class="dv">1</span> &lt;-<span class="st"> </span>kwb.utils<span class="op">::</span><span class="kw">asNoFactorDataFrame</span>(m)
resutl_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(m, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)

<span class="kw">identical</span>(result_<span class="dv">1</span>, result_<span class="dv">2</span>)
<span class="co">#&gt; [1] FALSE</span></code></pre></div>
</div>
<div id="function-asrowlist" class="section level3">
<h3 class="hasAnchor">
<a href="#function-asrowlist" class="anchor"></a>Function <code><a href="../reference/asRowList.html">asRowList()</a></code>
</h3>
<p>This function converts a matrix into a list of its rows. See <code><a href="../reference/asColumnList.html">asColumnList()</a></code> for an explanation of when this may be useful.</p>
</div>
<div id="function-assertrowsandcolumns" class="section level3">
<h3 class="hasAnchor">
<a href="#function-assertrowsandcolumns" class="anchor"></a>Function <code><a href="../reference/assertRowsAndColumns.html">assertRowsAndColumns()</a></code>
</h3>
<p>If you want to do calculations with a set of matrices it is important that all matrices have the same dimensions and that rows and columns of the same name are found at the same row and column indices, respectively. The function <code><a href="../reference/assertRowsAndColumns.html">assertRowsAndColumns()</a></code> takes a matrix as input and returns a matrix as output. The function guarantees that the returned matrix contains rows and columns of requested names in requested orders. It does so by</p>
<ul>
<li>creating rows/columns that are requested but not contained in the input matrix,</li>
<li>removing rows/columns that are contained in the input matrix but not requested,</li>
<li>moving rows/columns that are contained in the input matrix but not in the requested order.</li>
</ul>
<p>Imagine three different matrices, each of with is created with <code><a href="../reference/createMatrix.html">createMatrix()</a></code>, another function from this package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(m_<span class="dv">1</span> &lt;-<span class="st"> </span>kwb.utils<span class="op">::</span><span class="kw">createMatrix</span>(<span class="kw">c</span>(<span class="st">"a"</span>, <span class="st">"c"</span>), <span class="kw">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>), <span class="dt">value =</span> <span class="dv">1</span>))
<span class="co">#&gt;    </span>
<span class="co">#&gt;     x y</span>
<span class="co">#&gt;   a 1 1</span>
<span class="co">#&gt;   c 1 1</span>
(m_<span class="dv">2</span> &lt;-<span class="st"> </span>kwb.utils<span class="op">::</span><span class="kw">createMatrix</span>(<span class="kw">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>), <span class="kw">c</span>(<span class="st">"x"</span>, <span class="st">"z"</span>), <span class="dt">value =</span> <span class="dv">2</span>))
<span class="co">#&gt;    </span>
<span class="co">#&gt;     x z</span>
<span class="co">#&gt;   a 2 2</span>
<span class="co">#&gt;   b 2 2</span>
(m_<span class="dv">3</span> &lt;-<span class="st"> </span>kwb.utils<span class="op">::</span><span class="kw">createMatrix</span>(<span class="kw">c</span>(<span class="st">"b"</span>, <span class="st">"c"</span>), <span class="kw">c</span>(<span class="st">"y"</span>, <span class="st">"z"</span>), <span class="dt">value =</span> <span class="dv">3</span>))
<span class="co">#&gt;    </span>
<span class="co">#&gt;     y z</span>
<span class="co">#&gt;   b 3 3</span>
<span class="co">#&gt;   c 3 3</span></code></pre></div>
<p>Each matrix has two out of three possible rows <code>a</code>, <code>b</code> and <code>c</code> and has two out of three possible columns <code>x</code>, <code>y</code> and <code>z</code>. You can now unify the shape of all matrices by means of <code><a href="../reference/assertRowsAndColumns.html">assertRowsAndColumns()</a></code>, specifying the rows and columns to be required:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">row_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>)
col_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>)

(m_<span class="dv">1</span> &lt;-<span class="st"> </span>kwb.utils<span class="op">::</span><span class="kw">assertRowsAndColumns</span>(m_<span class="dv">1</span>, row_names, col_names))
<span class="co">#&gt;    </span>
<span class="co">#&gt;     x y z</span>
<span class="co">#&gt;   a 1 1 0</span>
<span class="co">#&gt;   b 0 0 0</span>
<span class="co">#&gt;   c 1 1 0</span>
(m_<span class="dv">2</span> &lt;-<span class="st"> </span>kwb.utils<span class="op">::</span><span class="kw">assertRowsAndColumns</span>(m_<span class="dv">2</span>, row_names, col_names))
<span class="co">#&gt;    </span>
<span class="co">#&gt;     x y z</span>
<span class="co">#&gt;   a 2 0 2</span>
<span class="co">#&gt;   b 2 0 2</span>
<span class="co">#&gt;   c 0 0 0</span>
(m_<span class="dv">3</span> &lt;-<span class="st"> </span>kwb.utils<span class="op">::</span><span class="kw">assertRowsAndColumns</span>(m_<span class="dv">3</span>, row_names, col_names))
<span class="co">#&gt;    </span>
<span class="co">#&gt;     x y z</span>
<span class="co">#&gt;   a 0 0 0</span>
<span class="co">#&gt;   b 0 3 3</span>
<span class="co">#&gt;   c 0 3 3</span></code></pre></div>
<p>Missing rows or columns are inserted and filled with the value that is given in the argument <code>fill_value</code> (defaulting to <code>0</code>, as can be seen above). Now, the matrices can e.g. be summed up:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m_<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>m_<span class="dv">2</span> <span class="op">+</span><span class="st"> </span>m_<span class="dv">3</span>
<span class="co">#&gt;    </span>
<span class="co">#&gt;     x y z</span>
<span class="co">#&gt;   a 3 1 2</span>
<span class="co">#&gt;   b 2 3 5</span>
<span class="co">#&gt;   c 1 4 3</span></code></pre></div>
<p>Or, they can be put into a three dimensional array:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">array_3d &lt;-<span class="st"> </span><span class="kw">array</span>(
  <span class="kw">c</span>(m_<span class="dv">1</span>, m_<span class="dv">2</span>, m_<span class="dv">3</span>), 
  <span class="dt">dimnames =</span> <span class="kw">list</span>(row_names, col_names, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>), 
  <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>)
)

array_3d
<span class="co">#&gt; , , 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x y z</span>
<span class="co">#&gt; a 1 1 0</span>
<span class="co">#&gt; b 0 0 0</span>
<span class="co">#&gt; c 1 1 0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , 2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x y z</span>
<span class="co">#&gt; a 2 0 2</span>
<span class="co">#&gt; b 2 0 2</span>
<span class="co">#&gt; c 0 0 0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; , , 3</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   x y z</span>
<span class="co">#&gt; a 0 0 0</span>
<span class="co">#&gt; b 0 3 3</span>
<span class="co">#&gt; c 0 3 3</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#how-to-get-an-overview-of-functions-in-a-package">How to get an overview of functions in a package?</a></li>
      <li><a href="#one-function-a-day">One Function a day…</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Hauke Sonnenberg.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
