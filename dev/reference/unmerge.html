<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Split a data frame z into two data frames x and y so
that merge(x, y) is z."><title>Invert the Merging of two Data Frames — unmerge • kwb.utils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Invert the Merging of two Data Frames — unmerge"><meta property="og:description" content="Split a data frame z into two data frames x and y so
that merge(x, y) is z."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">kwb.utils</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.14.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/functions_array.html">Array/Matrix Functions</a>
    <a class="dropdown-item" href="../articles/functions_call.html">Calling Functions</a>
    <a class="dropdown-item" href="../articles/functions_check.html">Check Functions</a>
    <a class="dropdown-item" href="../articles/functions_conversion.html">Conversion Functions</a>
    <a class="dropdown-item" href="../articles/functions_crypto.html">Cryptographic Functions</a>
    <a class="dropdown-item" href="../articles/functions_data_frame.html">Functions Working on Data Frames</a>
    <a class="dropdown-item" href="../articles/functions_debug.html">Debug Functions</a>
    <a class="dropdown-item" href="../articles/functions_dictionary.html">Grammar/Dictionary Functions</a>
    <a class="dropdown-item" href="../articles/functions_if.html">Shortcut Functions to if-statements</a>
    <a class="dropdown-item" href="../articles/functions_in_out.html">Input and Output Functions</a>
    <a class="dropdown-item" href="../articles/functions_list.html">Functions Working on Lists</a>
    <a class="dropdown-item" href="../articles/functions_logical.html">Functions Returning Logical</a>
    <a class="dropdown-item" href="../articles/functions_object.html">General Object Functions</a>
    <a class="dropdown-item" href="../articles/functions_stats.html">Mathematical or Statistical Functions</a>
    <a class="dropdown-item" href="../articles/functions_string.html">String Functions</a>
    <a class="dropdown-item" href="../articles/functions_system.html">Operating System Functions</a>
    <a class="dropdown-item" href="../articles/functions_ungrouped.html">Non-Categorised Functions</a>
    <a class="dropdown-item" href="../articles/functions_vector.html">Vector Functions</a>
    <a class="dropdown-item" href="../articles/overview.html">Overview</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/kwb-r/kwb.utils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Invert the Merging of two Data Frames</h1>
      <small class="dont-index">Source: <a href="https://github.com/kwb-r/kwb.utils/blob/HEAD/R/merge.R" class="external-link"><code>R/merge.R</code></a></small>
      <div class="d-none name"><code>unmerge.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Split a data frame <code>z</code> into two data frames <code>x</code> and <code>y</code> so
that <code>merge(x, y)</code> is <code>z</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">unmerge</span><span class="op">(</span><span class="va">z</span>, <span class="va">by</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>z</dt>
<dd><p>data frame</p></dd>


<dt>by</dt>
<dd><p>vector of names of columns in <code>z</code> that are used to build 
groups of rows of <code>z</code> so that within each group the values in these 
columns do not change. For each group the columns being constant over all 
rows are identified. Columns that are constant in each group will appear in
the data frame <code>x</code> whereas the remaining columns will appear in the 
data frame <code>y</code> of the returned list.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>list with two elements <code>x</code> and <code>y</code> each of which are data 
  frames containing at least the columns given in <code>by</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"peter"</span>, <span class="st">"peter"</span>, <span class="st">"paul"</span>, <span class="st">"mary"</span>, <span class="st">"paul"</span>, <span class="st">"mary"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">42</span>, <span class="fl">42</span>, <span class="fl">31</span>, <span class="fl">28</span>, <span class="fl">31</span>, <span class="fl">28</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">181</span>, <span class="fl">181</span>, <span class="fl">178</span>, <span class="fl">172</span>, <span class="fl">178</span>, <span class="fl">172</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  subject <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"maths"</span>, <span class="st">"bio"</span>, <span class="st">"bio"</span>, <span class="st">"bio"</span>, <span class="st">"chem"</span>, <span class="st">"maths"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2016</span>, <span class="fl">2017</span>, <span class="fl">2017</span>, <span class="fl">2017</span>, <span class="fl">2015</span>, <span class="fl">2016</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  mark <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"C"</span>, <span class="st">"b"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span><span class="co"># What fields seem to be properties of objects identified by name?</span></span></span>
<span class="r-in"><span><span class="co"># -&gt; Age and height are fix properties of the persons identified by name</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">result1</span> <span class="op">&lt;-</span> <span class="fu">unmerge</span><span class="op">(</span><span class="va">z</span>, <span class="st">"name"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    name age height</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 peter  42    181</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  paul  31    178</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  mary  28    172</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    name subject year mark</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 peter   maths 2016    A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 peter     bio 2017    B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  paul     bio 2017    B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  mary     bio 2017    A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  paul    chem 2015    C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  mary   maths 2016    b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># What fields seem to be properties of objects identified by subject?</span></span></span>
<span class="r-in"><span><span class="co"># -&gt; It seems that the subjects have been tested in different years</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu">unmerge</span><span class="op">(</span><span class="va">z</span>, <span class="st">"subject"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   subject year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   maths 2016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     bio 2017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    chem 2015</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   subject  name age height mark</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   maths peter  42    181    A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     bio peter  42    181    B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     bio  paul  31    178    B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     bio  mary  28    172    A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    chem  paul  31    178    C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   maths  mary  28    172    b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Test if merge(result$x, result$y) results in z</span></span></span>
<span class="r-in"><span><span class="va">y1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">result1</span><span class="op">$</span><span class="va">x</span>, <span class="va">result1</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">result2</span><span class="op">$</span><span class="va">x</span>, <span class="va">result2</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">columns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="fullySorted.html">fullySorted</a></span><span class="op">(</span><span class="va">z</span><span class="op">[</span>, <span class="va">columns</span><span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="fullySorted.html">fullySorted</a></span><span class="op">(</span><span class="va">y1</span><span class="op">[</span>, <span class="va">columns</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="co"># TRUE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="fullySorted.html">fullySorted</a></span><span class="op">(</span><span class="va">z</span><span class="op">[</span>, <span class="va">columns</span><span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="fullySorted.html">fullySorted</a></span><span class="op">(</span><span class="va">y2</span><span class="op">[</span>, <span class="va">columns</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="co"># TRUE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/hsonne" class="external-link">Hauke Sonnenberg</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

